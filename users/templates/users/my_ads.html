{% extends 'web_room/base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/my_ad.css' %}" type="text/css">
{% endblock extra_css %}
{% block title %}Ваш профиль{% endblock %}

{% block content %}
 <h1>Мои объявления</h1>

    {% if ads %}
        {% for ad in ads %}
            <div style="border: 1px solid #ddd; padding: 10px; margin-bottom: 10px;">
                <h2>{{ ad.title }}</h2>
                <p><strong>Местоположение:</strong> {{ ad.location }}</p>
                <p><strong>Цена:</strong> {{ ad.price }} руб.</p>
                <p><strong>Количество комнат:</strong> {{ ad.count_rooms }}</p>
                <p><strong>Тип:</strong> {{ ad.get_type_of_room_display }}</p>
                <p><strong>Статус:</strong> {% if ad.is_rented %} <span style="color: red;">Забронировано</span> {% else %} <span style="color: green;">Свободно</span> {% endif %}</p>
                <p><strong>Арендатор:</strong> {% if ad.renter %} {{ ad.renter.username }} {% else %} - {% endif %}</p>

                {% if ad.image %}
                    <img src="{{ ad.image.url }}" alt="Фото объявления" style="max-width: 300px;">
                {% endif %}

                {% if not ad.is_rented %}
                    <form action="{% url 'users:rent_ad' ad.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit">Сдать в аренду</button>
                    </form>
                {% else %}
                    <form action="{% url 'users:release_ad' ad.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit">Освободить</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>У вас пока нет объявлений.</p>
    {% endif %}
{% endblock %}